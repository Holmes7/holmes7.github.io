<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><!-- <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> --><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v3.1.2"><title>Ashutosh Patkar</title><script src="https://kit.fontawesome.com/dd0233f433.js" crossorigin="anonymous"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/index.b8581d98.css" />
<style>:not(pre)>code{background-color:#2d2d2d;color:#fff;padding:.15rem .3rem;margin-right:2px;border-radius:4px;border-color:#fff;border-width:1px;font-size:.7em;line-height:1.2;box-shadow:0 1px 3px #0003}blockquote{border-left:5px solid #e28206;padding:2px 2px 2px 20px}
</style></head><!-- bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-700 via-gray-900 to-black
	bg-gradient-to-tl from-gray-700 via-gray-900 to-black
	bg-gradient-to-tl from-stone-700 via-gray-800 to-gray-900
--><body class="tracking-wide bg-gradient-to-tl from-stone-700 via-gray-800 to-gray-900 min-h-screen flex flex-col text-gray-300 font-comic max-w-screen-xl mx-auto px-7"><header class="my-7 text-xl font-bold"><nav class="flex justify-center gap-8"><a class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline" href="/">Home</a><a class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline" href="/tech">TechBlog</a><a class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline" href="/thoughts">Thoughts</a></nav></header><div class="flex-grow pb-4 border-b-2"><article class="tracking-wide max-w-3xl mx-auto py-5 border-t-2 pt-8 prose-p:text-lg prose-h2:text-green-500 prose-h2:text-2xl prose-pre:p-5 prose-pre:rounded-lg prose-pre:my-3 prose-ol:mb-3 prose-a:underline prose-a:decoration-teal-400 prose-a:underline-offset-4 prose-a:decoration-1 prose-a:text-slate-200 hover:prose-a:decoration-2 prose-h3:text-orange-400 prose-h3:text-xl prose-strong:text-slate-100 prose-strong:font-extrabold prose-ol:pl-7 prose-ol:list-decimal prose-ol:list-outside prose-blockquote:object-center prose-blockquote:italic whitespace-pre-line prose-blockquote:py-0"><h1 class="text-4xl mb-2 bg-gradient-to-r from-red-500 to-yellow-500 text-transparent bg-clip-text">Saving 2 Minutes of My Life with GitHub Actions</h1><p class="text-base text-slate-400 pb-6">Created on February 12, 2023</p><h2 id="the-problem">The Problem</h2>
<p>So my previous project, the <a href="https://randommashupgenerator.netlify.app/">Random Mashup Generator</a> was built using React and TypeScript. The challenge? Browsers understand HTML/CSS/JS, but not React components. So, I had to locally build the project and then manually deploy the resulting build folder to Netlify. This workflow was manageable for occasional projects but became a significant hassle when working on my personal website.</p>
<p>Unlike the Mashup Generator, my personal website relies on a static site generator, which requires a build step to transform templates and markdown into HTML/CSS. What sets it apart is that I frequently make tweaks and adjustments. The thought of repeatedly building the project locally, navigating to Netlify, and manually uploading it didn’t sit well with me. This is when I began exploring GitHub Actions as a potential solution.</p>
<h2 id="what-are-github-actions">What Are GitHub Actions?</h2>
<p>Think of GitHub Actions as a simple server provided by GitHub, aptly called a “runner.” However, instead of interacting with it directly, you define instructions in the form of YAML files. These instructions execute when specific events occur within your repository, such as pushing a commit to the main branch or creating a pull request.</p>
<p>These YAML files are called “workflows” and are placed in the <code>.github/workflows</code> directory. Here’s what the directory structure of my repository looks like:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #A6E22E">root/</span></span>
<span class="line"><span style="color: #F92672">|</span><span style="color: #A6E22E">--</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">.github/</span></span>
<span class="line"><span style="color: #F92672">|</span><span style="color: #F8F8F2">   </span><span style="color: #F92672">|</span><span style="color: #A6E22E">--</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">workflows/</span></span>
<span class="line"><span style="color: #F92672">|</span><span style="color: #F8F8F2">   </span><span style="color: #F92672">|</span><span style="color: #F8F8F2">   </span><span style="color: #F92672">|</span><span style="color: #A6E22E">--</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">host.yml</span></span></code></pre>
<h2 id="when-does-the-workflow-run">When Does the Workflow Run?</h2>
<p>I wanted GitHub to automatically build and deploy my website every time I pushed a commit to the main branch. This is defined by specifying the event in the <code>on</code> section of the workflow YAML file:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #AE81FF">on</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">push</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">branches</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #E6DB74">main</span></span></code></pre>
<h2 id="what-does-the-workflow-do">What Does the Workflow Do?</h2>
<p>Similar to the steps we take on our local computers, GitHub Actions workflows consist of specific instructions called “steps.” Each step can be a shell script or a pre-made action, and they run in sequence, one after the other, with dependencies between them.</p>
<h2 id="checking-out-the-repository">Checking Out the Repository</h2>
<p>First, just like on our local machines, we need to navigate to the project directory. GitHub provides a pre-made action called <a href="https://github.com/actions/checkout">actions/checkout@v3</a> that grants the workflow access to the repository. Here’s how I set it up:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">jobs</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">host</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">runs-on</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">ubuntu-20.04</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">steps</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #F92672">uses</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">actions/checkout@v3</span></span></code></pre>
<h2 id="setting-up-node">Setting Up Node</h2>
<p>Next, I specify that I want to use Node.js, and there’s another handy action, <a href="https://github.com/actions/setup-node">actions/setup-node@v3</a>, to accomplish this. I placed this step after the checkout step:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">steps</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Use Node.js 19</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">uses</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">actions/setup-node@v3</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">with</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">node-version</span><span style="color: #F8F8F2">: </span><span style="color: #AE81FF">19</span></span></code></pre>
<p>With Node.js ready, I move on to installing the project’s dependencies, which I do with a simple shell script:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">steps</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Install dependencies</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">run</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">npm ci</span></span></code></pre>
<p>I use <code>npm ci</code> instead of <code>npm install</code> for a clean, automated environment-friendly installation of dependencies. It’s worth noting that I encountered an error at this stage because I had ignored the <code>package-lock.json</code> file, which is required for this command.</p>
<h2 id="building-and-deploying">Building and Deploying</h2>
<p>Similarly, I execute another shell command to build the project. I’ve configured an npm script to direct the build output (HTML/CSS/JS files) to the <code>_site</code> folder:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">steps</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Build Eleventy</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">run</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">npm run build</span></span></code></pre>
<p>Finally, I host my website on GitHub Pages and want it to access the <code>_site</code> folder. To accomplish this, I use another GitHub Actions action, <a href="https://github.com/peaceiris/actions-gh-pages/">peaceiris/actions-gh-pages@v3</a>. This action creates a new branch named <code>gh-pages</code> in the repository and deploys the <code>_site</code> folder there:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">steps</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Deploy</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">uses</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">with</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">publish_dir</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">./_site</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">github_token</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">${{ secrets.GITHUB_TOKEN }}</span></span></code></pre>
<p>That’s it! This was my introduction to continuous delivery, which, in essence, is streamlining the entire process. I hope this post has given you a basic understanding of GitHub Actions and how it can simplify your development and deployment workflows.</p>
<h2 id="complete-workflow-file">Complete Workflow File</h2>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Build and Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AE81FF">on</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">push</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">branches</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #E6DB74">main</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">jobs</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">host</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">runs-on</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">ubuntu-20.04</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">steps</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #F92672">uses</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Use Node.js 19</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">uses</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">actions/setup-node@v3</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">with</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #F92672">node-version</span><span style="color: #F8F8F2">: </span><span style="color: #AE81FF">19</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Install dependencies</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">run</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Build Eleventy</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">run</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">      - </span><span style="color: #F92672">name</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">Deploy</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">uses</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">with</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #F92672">publish_dir</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">./_site</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #F92672">github_token</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">${{ secrets.GITHUB_TOKEN }}</span></span></code></pre>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions">GitHub Actions Documentation</a></li>
</ul></article></div><footer id="contact" class="flex flex-col pb-8 pt-5 items-center space-y-6 md:flex-row md:justify-between md:space-y-0"><div class="text-center md:text-left"><p class="text-2xl mb-2">Ashutosh Patkar</p><div class="text-sm"><p>Made Performant with Astro</p><p>and Beautiful with TailwindCSS</p></div></div><section><div class="flex flex-wrap gap-4 justify-center"><a href="https://www.linkedin.com/in/ashutosh-patkar/" class="text-2xl hover:text-sky-300" aria-label="linkedin"><i class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline fa-brands fa-linkedin"></i></a><a href="https://github.com/Holmes7" class="text-2xl hover:text-sky-300" aria-label="github"><i class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline fa-brands fa-github"></i></a><a href="mailto:ashutoshpatkar71@gmail.com" class="text-2xl hover:text-sky-300" aria-label="email"><i class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline fa-solid fa-envelope"></i></a><a href="https://www.instagram.com/_holmes7_/" class="text-2xl hover:text-sky-300" aria-label="instagram"><i class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline fa-brands fa-instagram"></i></a><a href="https://medium.com/@ashutoshpatkar71" class="text-2xl hover:text-sky-300" aria-label="medium"><i class="decoration-sky-300 decoration-2 underline-offset-8 hover:underline fa-brands fa-medium"></i></a></div></section></footer></body></html>